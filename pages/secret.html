<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secret Page ğŸ”</title>
    <meta name="description" content="A hidden secret page for Ennpo">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kalam:wght@300;400;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="icon" href="../favicon.svg" type="image/svg+xml">
    <link rel="stylesheet" href="../css/style.css">
    <style>
        .secret-container {
            max-width: 600px;
            margin: 2rem auto;
            padding: 0 1rem;
        }
        
        .secret-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 30px var(--shadow);
            backdrop-filter: blur(10px);
            border: 2px solid var(--pink);
            text-align: center;
            animation: fadeInUp 0.6s ease-out;
            transition: all 0.3s ease;
        }
        
        .password-section {
            margin-bottom: 2rem;
        }
        
        .password-label {
            font-family: 'Kalam', cursive;
            font-size: 1.5rem;
            color: var(--text-primary);
            margin-bottom: 1rem;
            display: block;
        }
        
        .password-input {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--border);
            border-radius: 12px;
            font-size: 1.1rem;
            text-align: center;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
            background: var(--bg-primary);
            color: var(--text-primary);
        }
        
        .password-input:focus {
            outline: none;
            border-color: var(--accent);
        }
        
        .submit-btn {
            background: linear-gradient(45deg, var(--dark-pink), var(--purple));
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px var(--shadow);
        }
        
        .submit-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 25px var(--shadow);
        }
        
        .hint {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-top: 1rem;
            font-style: italic;
        }
        
        .secret-content {
            display: none;
            animation: fadeInUp 0.8s ease-out;
        }
        
        .secret-content.show {
            display: block;
        }
        
        .secret-message {
            font-family: 'Kalam', cursive;
            font-size: 1.8rem;
            color: var(--accent);
            margin-bottom: 2rem;
            line-height: 1.6;
        }
        
        .secret-emoji {
            font-size: 4rem;
            margin-bottom: 1rem;
            animation: bounce 2s ease-in-out infinite;
        }
        
        .love-letter {
            background: var(--bg-primary);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
            border: 1px solid var(--border);
            text-align: left;
            font-size: 1.1rem;
            line-height: 1.8;
            color: var(--text-primary);
        }
        
        .love-letter p {
            margin-bottom: 1rem;
        }
        
        .love-letter p:last-child {
            margin-bottom: 0;
            text-align: right;
            font-weight: 600;
            color: var(--accent);
        }
        
        
        .error-message {
            color: #DC143C;
            font-weight: 600;
            margin-top: 1rem;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .error-message.show {
            opacity: 1;
        }
        
        .success-message {
            color: #228B22;
            font-weight: 600;
            margin-top: 1rem;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .success-message.show {
            opacity: 1;
        }
        
        /* Dark mode styles for secret page */
        body.dark-mode .secret-card {
            background: var(--card-bg);
            border: 2px solid var(--pink);
        }
        
        body.dark-mode .password-input {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 2px solid var(--border);
        }
        
        body.dark-mode .password-input::placeholder {
            color: var(--text-secondary);
        }
        
        body.dark-mode .love-letter {
            background: var(--card-bg);
            border: 2px solid var(--pink);
        }
    </style>
</head>
<body>
    <!-- Floating hearts background -->
    <div class="hearts-container" id="heartsContainer"></div>
    
    <!-- Dark mode toggle -->
    <button class="dark-mode-toggle" id="darkModeToggle" aria-label="Toggle dark mode">
        <span id="themeIcon">ğŸŒ™</span>
    </button>
    
    <!-- Navigation -->
    <nav class="nav">
        <div class="nav-container">
            <button class="hamburger" id="hamburger" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <div class="nav-links" id="navLinks">
                <a href="../index.html" class="nav-link">ğŸ  Home</a>
                <a href="notes.html" class="nav-link">ğŸ“ Notes</a>
                <a href="game.html" class="nav-link">ğŸ® Game</a>
                <a href="truthordare.html" class="nav-link">ğŸ’˜ Fun</a>
                <a href="wouldyourather.html" class="nav-link">ğŸ’­ Would You Rather</a>
                <a href="gifts.html" class="nav-link">ğŸ Gifts</a>
                <a href="coupons.html" class="nav-link">ğŸ« Coupons</a>
                <a href="secret.html" class="nav-link active secret">ğŸ” Secret</a>
            </div>
        </div>
    </nav>
    
    <!-- Main content -->
    <main class="main">
        <div class="container">
            <h1 class="title">Secret Page ğŸ”</h1>
            <p class="subtitle">This page is locked! Can you find the password?</p>
            
            <div class="secret-container">
                <div class="secret-card">
                    <div class="password-section" id="passwordSection">
                        <label class="password-label" for="passwordInput">
                            What's Shin's favorite nickname for Ennpo?
                        </label>
                        <input type="text" id="passwordInput" class="password-input" placeholder="Enter the answer...">
                        <button class="submit-btn" id="submitBtn">Unlock Secret ğŸ”“</button>
                        <div class="hint">Hint: It's something sweet and cute! ğŸ°</div>
                        <div class="error-message" id="errorMessage">Wrong answer! Try again! ğŸ˜…</div>
                        <div class="success-message" id="successMessage">Correct! Unlocking secret... âœ¨</div>
                    </div>
                    
                    <div class="secret-content" id="secretContent">
                        <div class="secret-emoji">ğŸ’–</div>
                        <div class="secret-message">Congratulations! You found the secret! ğŸ‰</div>
                        
                        <div class="love-letter">
                            <p>My dearest Ennpo,</p>
                            <p>You found my secret message! This is just one of the many ways I wanted to show you how much you mean to me. Every day with you is a gift, and I treasure every moment we spend together.</p>
                            <p>You make me laugh, you make me smile, and you make me feel like the luckiest person in the world. Your kindness, your beauty, and your amazing personality never cease to amaze me.</p>
                            <p>I love how you always know how to make me feel better when I'm down, how you support me in everything I do, and how you make even the simplest moments feel magical.</p>
                            <p>Thank you for being you, for loving me, and for making my life so much brighter. I can't wait to create many more beautiful memories together.</p>
                            <p>Forever yours,<br>Shin ğŸ»ğŸ’•</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>


    <script>
        // Dark mode functionality
        function initDarkMode() {
            const themeIcon = document.getElementById('themeIcon');
            if (!themeIcon) return;
            
            try {
                const savedTheme = localStorage.getItem('theme');
                if (savedTheme === 'dark') {
                    document.body.classList.add('dark-mode');
                    themeIcon.textContent = 'â˜€ï¸';
                }
            } catch (error) {
                console.error('Error accessing localStorage for theme:', error);
            }
        }

        function toggleDarkMode() {
            const themeIcon = document.getElementById('themeIcon');
            if (!themeIcon) return;
            
            document.body.classList.toggle('dark-mode');
            const isDark = document.body.classList.contains('dark-mode');
            themeIcon.textContent = isDark ? 'â˜€ï¸' : 'ğŸŒ™';
            
            try {
                localStorage.setItem('theme', isDark ? 'dark' : 'light');
                console.log(isDark ? 'ğŸŒ™ Dark mode activated! Easy on the eyes! ğŸŒ™' : 'â˜€ï¸ Light mode activated! Bright and cheerful! â˜€ï¸');
            } catch (error) {
                console.error('Error saving theme to localStorage:', error);
            }
        }

        // Hamburger menu functionality
        function toggleNav() {
            const hamburger = document.getElementById('hamburger');
            const navLinks = document.getElementById('navLinks');
            if (!hamburger || !navLinks) {
                console.error('Hamburger or navLinks not found!');
                return;
            }
            
            const isActive = hamburger.classList.toggle('active');
            navLinks.classList.toggle('active');
            hamburger.setAttribute('aria-expanded', isActive.toString());
            
            console.log('Mobile menu toggled:', isActive);
            console.log('Nav links count:', navLinks.querySelectorAll('.nav-link').length);
        }

        // Floating hearts functionality
        const heartsState = {
            hearts: [],
            maxHearts: 20,
            animationFrameId: null,
            lastHeartTime: 0,
            heartInterval: 2500,
            isMobile: false
        };

        function detectMobile() {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) 
                || window.innerWidth < 768;
        }

        function createFloatingHearts() {
            const heartsContainer = document.getElementById('heartsContainer');
            if (!heartsContainer) return;
            
            heartsState.isMobile = detectMobile();
            if (heartsState.isMobile) {
                heartsState.heartInterval = 4000;
                heartsState.maxHearts = 10;
            }
            
            function animateHearts(timestamp) {
                heartsState.hearts = heartsState.hearts.filter(heart => heart.element.parentNode);
                
                if (timestamp - heartsState.lastHeartTime > heartsState.heartInterval) {
                    if (Math.random() < 0.35 && heartsState.hearts.length < heartsState.maxHearts) {
                        createHeart();
                        heartsState.lastHeartTime = timestamp;
                    }
                }
                
                heartsState.animationFrameId = requestAnimationFrame(animateHearts);
            }
            
            heartsState.animationFrameId = requestAnimationFrame(animateHearts);
        }

        function createHeart() {
            const heartsContainer = document.getElementById('heartsContainer');
            if (!heartsContainer) return;
            if (heartsState.hearts.length >= heartsState.maxHearts) return;
            
            const heart = document.createElement('div');
            heart.className = 'heart-float';
            heart.textContent = 'ğŸ’–';
            heart.style.left = Math.random() * 100 + '%';
            heart.style.animationDuration = (Math.random() * 2 + 6) + 's';
            heart.style.fontSize = '16px';
            
            heartsContainer.appendChild(heart);
            heartsState.hearts.push({ element: heart, createdAt: Date.now() });
            
            setTimeout(() => {
                if (heart.parentNode) {
                    heart.parentNode.removeChild(heart);
                }
            }, 8000);
        }

        // Correct answers (case insensitive)
        const correctAnswers = ['bunny', 'honey', 'sweetie', 'cutie', 'baby'];
        
        // DOM elements (will be set after DOM loads)
        let passwordInput, submitBtn, passwordSection, secretContent, errorMessage, successMessage;
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize dark mode
            initDarkMode();
            
            // Set up dark mode toggle
            const darkModeToggle = document.getElementById('darkModeToggle');
            if (darkModeToggle) {
                darkModeToggle.addEventListener('click', toggleDarkMode);
            }
            
            // Set up hamburger menu
            const hamburger = document.getElementById('hamburger');
            if (hamburger) {
                hamburger.setAttribute('aria-expanded', 'false');
                hamburger.addEventListener('click', toggleNav);
            }
            
            // Set up nav links
            const navLinks = document.getElementById('navLinks');
            if (navLinks) {
                const allNavLinks = navLinks.querySelectorAll('.nav-link');
                allNavLinks.forEach(link => {
                    link.addEventListener('click', () => {
                        if (hamburger && navLinks) {
                            hamburger.classList.remove('active');
                            navLinks.classList.remove('active');
                            hamburger.setAttribute('aria-expanded', 'false');
                        }
                    });
                });
            }
            
            // Create floating hearts
            createFloatingHearts();
            
            // Get DOM elements after DOM is loaded
            passwordInput = document.getElementById('passwordInput');
            submitBtn = document.getElementById('submitBtn');
            passwordSection = document.getElementById('passwordSection');
            secretContent = document.getElementById('secretContent');
            errorMessage = document.getElementById('errorMessage');
            successMessage = document.getElementById('successMessage');
            
            console.log('Secret page loaded');
            console.log('Password input:', passwordInput);
            console.log('Submit button:', submitBtn);
            setupPasswordInput();
        });
        
        // Set up password input
        function setupPasswordInput() {
            if (!passwordInput || !submitBtn) {
                console.error('Password input or submit button not found!');
                console.error('passwordInput:', passwordInput);
                console.error('submitBtn:', submitBtn);
                return;
            }
            
            console.log('Setting up password input...');
            
            // Add event listener for button click
            submitBtn.addEventListener('click', function(e) {
                console.log('Unlock button clicked!');
                e.preventDefault();
                checkPassword();
            });
            
            // Add event listener for Enter key
            passwordInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    console.log('Enter key pressed!');
                    e.preventDefault();
                    checkPassword();
                }
            });
            
            console.log('Password input setup complete');
        }
        
        // Check password
        function checkPassword() {
            console.log('checkPassword function called');
            const userAnswer = passwordInput.value.trim().toLowerCase();
            console.log('Checking password:', userAnswer);
            console.log('Correct answers:', correctAnswers);
            
            if (!userAnswer) {
                alert('Please enter a password!');
                return;
            }
            
            // Hide previous messages
            errorMessage.classList.remove('show');
            successMessage.classList.remove('show');
            
            if (correctAnswers.includes(userAnswer)) {
                // Correct answer
                successMessage.classList.add('show');
                console.log("ğŸ‰ Correct answer! Secret unlocked! ğŸ‰");
                
                setTimeout(() => {
                    passwordSection.style.display = 'none';
                    secretContent.classList.add('show');
                    createCelebrationEffect();
                }, 1500);
            } else {
                // Wrong answer
                errorMessage.classList.add('show');
                console.log("ğŸ˜… Wrong answer! Try again! ğŸ˜…");
                
                // Shake animation
                passwordInput.style.animation = 'shake 0.5s ease-in-out';
                setTimeout(() => {
                    passwordInput.style.animation = '';
                }, 500);
                
                // Clear input
                passwordInput.value = '';
                passwordInput.focus();
            }
        }
        
        // Create celebration effect
        function createCelebrationEffect() {
            const colors = ['ğŸ’–', 'ğŸ’•', 'ğŸ’—', 'ğŸ’', 'ğŸ’˜', 'ğŸ’', 'ğŸ‰', 'âœ¨', 'ğŸŒŸ', 'ğŸ’«'];
            
            for (let i = 0; i < 25; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.textContent = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.position = 'fixed';
                    confetti.style.left = Math.random() * window.innerWidth + 'px';
                    confetti.style.top = '-50px';
                    confetti.style.fontSize = '30px';
                    confetti.style.animation = 'confetti 4s ease-out forwards';
                    confetti.style.zIndex = '1000';
                    confetti.style.pointerEvents = 'none';
                    
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => {
                        if (confetti.parentNode) {
                            confetti.parentNode.removeChild(confetti);
                        }
                    }, 4000);
                }, i * 150);
            }
        }
        
        // Add animations
        const secretStyle = document.createElement('style');
        secretStyle.textContent = `
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                25% { transform: translateX(-5px); }
                75% { transform: translateX(5px); }
            }
            
            @keyframes confetti {
                0% { transform: translateY(0) rotate(0deg); opacity: 1; }
                100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
            }
        `;
        document.head.appendChild(secretStyle);
        

        // Focus on input when page loads
        window.addEventListener('load', function() {
            if (passwordInput) {
                passwordInput.focus();
            }
        });
    </script>
</body>
</html>
